/* Formatted on 8/23/2012 1:51:11 PM (QP5 v5.215.12089.38647) */
CREATE TABLE PROTECT.COURSE_LOG
AS
   SELECT *
     FROM PROTECT.COURSE
    WHERE 1 = 2;

ALTER TABLE PROTECT.COURSE_LOG ADD (LOGTIME TIMESTAMP(6));

CREATE OR REPLACE TRIGGER PROTECT.COURSE_UPDATE
   AFTER UPDATE OF ISDELETED
   ON PROTECT.COURSE
   REFERENCING NEW AS NEW OLD AS OLD
   FOR EACH ROW
DECLARE
BEGIN
   INSERT INTO PROTECT.COURSE_LOG
      (SELECT :NEW.COURSEID,
              :NEW.FILENAMEPATTERNFILTER,
              :NEW.FILENAMEPATTERNEXCLUDEFILTER,
              :NEW.MINFILESIZEFILTER,
              :NEW.MAXFILESIZEFILTER,
              :NEW.MINFILEMODIFICATIONDATEFILTER,
              :NEW.MAXFILEMODIFICATIONDATEFILTER,
              :NEW.MINFILELASTACCESSEDDATEFILTER,
              :NEW.MAXFILELASTACCESSEDDATEFILTER,
              :NEW.DEFAULTUSERNAME,
              :NEW.DEFAULTPASSWORDID,
              :NEW.ISDELETED,
              :NEW.ISDIFFERENTIAL,
              :NEW.MARKNEXTSCANFULL,
              :NEW.DEFAULTCREDENTIALID,
              CURRENT_TIMESTAMP
         FROM DUAL);
EXCEPTION
   WHEN OTHERS
   THEN
      NULL;
END COURSE_UPDATE;