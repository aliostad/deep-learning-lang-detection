CREATE OR REPLACE VIEW T_ACC_SLIP_BODY
AS 
SELECT
	a.SLIP_ID ,
	a.SLIP_IDSEQ ,
	a.MAKE_SLIPLINE ,
	a.ACC_CODE ,
	a.DB_AMT ,
	a.CR_AMT ,
	a.SUMMARY_CODE ,
	a.TAX_COMP_CODE ,
	a.COMP_CODE ,
	a.DEPT_CODE ,
	a.CLASS_CODE ,
	a.VAT_CODE ,
	a.VAT_DT ,
	a.SUPAMT ,
	a.VATAMT ,
	a.CUST_SEQ ,
	a.CUST_NAME ,
	a.BANK_CODE ,
	a.ACCNO ,
	a.RESET_SLIP_ID ,
	a.RESET_SLIP_IDSEQ,
	a.MAKE_COMP_CODE,
	a.MAKE_DEPT_CODE,
	a.MAKE_DT,
	a.KEEP_DT,
	a.ORG_SLIP_ID,
	a.ORG_SLIP_IDSEQ,
	a.BRAIN_GRP_SEQ,
	a.BRAIN_SLIP_SEQ1,
	a.BRAIN_SLIP_SEQ2 ,
	a.BRAIN_SLIP_LINE,
	a.BRAIN_SORT_SEQ,
	a.BRAIN_ACC_POSITION,
	a.SLIP_KIND_TAG,
	a.TRANSFER_TAG,
	a.IGNORE_SET_RESET_TAG,
	b.CRTUSERNO,
	b.CRTDATE,
	b.MODUSERNO,
	b.MODDATE,
	b.SUMMARY1 ,
	b.SUMMARY2 ,
	b.CARD_SEQ,
	b.CHK_NO ,
	b.BILL_NO ,
	b.REC_BILL_NO ,
	b.CP_NO ,
	b.SECU_NO ,
	b.LOAN_NO ,
	b.LOAN_REFUND_NO ,
	b.LOAN_REFUND_SEQ ,
	b.DEPOSIT_ACCNO ,
	b.PAYMENT_SEQ ,
	b.PAY_CON_CASH ,
	b.PAY_CON_BILL ,
	b.PAY_CON_BILL_DT ,
	b.PAY_CON_BILL_DAYS ,
	b.EMP_NO ,
	b.ANTICIPATION_DT ,
	b.MNG_ITEM_CHAR1 ,
	b.MNG_ITEM_CHAR2 ,
	b.MNG_ITEM_CHAR3 ,
	b.MNG_ITEM_CHAR4 ,
	b.MNG_ITEM_NUM1 ,
	b.MNG_ITEM_NUM2 ,
	b.MNG_ITEM_NUM3 ,
	b.MNG_ITEM_NUM4 ,
	b.MNG_ITEM_DT1 ,
	b.MNG_ITEM_DT2 ,
	b.MNG_ITEM_DT3 ,
	b.MNG_ITEM_DT4 ,
	b.FIX_ASSET_SEQ
FROM	T_ACC_SLIP_BODY1 a,
		T_ACC_SLIP_BODY2 b
WHERE	a.SLIP_ID = b.SLIP_ID
AND		a.SLIP_IDSEQ = b.SLIP_IDSEQ;

CREATE OR REPLACE TRIGGER "ERPW".T_ACC_SLIP_BODY_trg
Instead OF INSERT OR UPDATE OR DELETE ON T_ACC_SLIP_BODY
FOR EACH ROW
BEGIN
	IF INSERTING THEN
		INSERT INTO T_ACC_SLIP_BODY1
		(
			SLIP_ID,
			SLIP_IDSEQ,
			MAKE_SLIPLINE,
			ACC_CODE,
			DB_AMT,
			CR_AMT,
			SUMMARY_CODE,
			TAX_COMP_CODE,
			COMP_CODE,
			DEPT_CODE,
			CLASS_CODE,
			VAT_CODE,
			VAT_DT,
			SUPAMT,
			VATAMT,
			CUST_SEQ,
			CUST_NAME,
			BANK_CODE,
			ACCNO,
			RESET_SLIP_ID,
			RESET_SLIP_IDSEQ,
			ORG_SLIP_ID,
			ORG_SLIP_IDSEQ,
			BRAIN_GRP_SEQ,
			BRAIN_SLIP_SEQ1,
			BRAIN_SLIP_SEQ2,
			BRAIN_SLIP_LINE,
			BRAIN_SORT_SEQ,
			BRAIN_ACC_POSITION
		)
		VALUES
		(
			:NEW.SLIP_ID,
			:NEW.SLIP_IDSEQ,
			:NEW.MAKE_SLIPLINE,
			:NEW.ACC_CODE,
			NVL(:NEW.DB_AMT,0),
			NVL(:NEW.CR_AMT,0),
			:NEW.SUMMARY_CODE,
			:NEW.TAX_COMP_CODE,
			:NEW.COMP_CODE,
			:NEW.DEPT_CODE,
			:NEW.CLASS_CODE,
			:NEW.VAT_CODE,
			:NEW.VAT_DT,
			NVL(:NEW.SUPAMT,0),
			NVL(:NEW.VATAMT,0),
			:NEW.CUST_SEQ,
			:NEW.CUST_NAME,
			:NEW.BANK_CODE,
			:NEW.ACCNO,
			:NEW.RESET_SLIP_ID,
			:NEW.RESET_SLIP_IDSEQ,
			:NEW.ORG_SLIP_ID,
			:NEW.ORG_SLIP_IDSEQ,
			:NEW.BRAIN_GRP_SEQ,
			:NEW.BRAIN_SLIP_SEQ1,
			:NEW.BRAIN_SLIP_SEQ2,
			:NEW.BRAIN_SLIP_LINE,
			:NEW.BRAIN_SORT_SEQ,
			:NEW.BRAIN_ACC_POSITION
		);
		INSERT INTO T_ACC_SLIP_BODY2
		(
			SLIP_ID,
			SLIP_IDSEQ,
			CRTUSERNO,
			CRTDATE,
			MODUSERNO,
			MODDATE,
			SUMMARY1,
			SUMMARY2,
			CARD_SEQ,
			CHK_NO,
			BILL_NO,
			REC_BILL_NO,
			CP_NO,
			SECU_NO,
			LOAN_NO,
			LOAN_REFUND_NO,
			LOAN_REFUND_SEQ,
			DEPOSIT_ACCNO,
			PAYMENT_SEQ,
			PAY_CON_CASH,
			PAY_CON_BILL,
			PAY_CON_BILL_DT,
			PAY_CON_BILL_DAYS ,
			EMP_NO,
			ANTICIPATION_DT,
			MNG_ITEM_CHAR1,
			MNG_ITEM_CHAR2,
			MNG_ITEM_CHAR3,
			MNG_ITEM_CHAR4,
			MNG_ITEM_NUM1,
			MNG_ITEM_NUM2,
			MNG_ITEM_NUM3,
			MNG_ITEM_NUM4,
			MNG_ITEM_DT1,
			MNG_ITEM_DT2,
			MNG_ITEM_DT3,
			MNG_ITEM_DT4,
			FIX_ASSET_SEQ
		)
		VALUES
		(
			:NEW.SLIP_ID,
			:NEW.SLIP_IDSEQ,
			:NEW.CRTUSERNO,
			:NEW.CRTDATE,
			:NEW.MODUSERNO,
			:NEW.MODDATE,
			:NEW.SUMMARY1,
			:NEW.SUMMARY2,
			:NEW.CARD_SEQ,
			:NEW.CHK_NO,
			:NEW.BILL_NO,
			:NEW.REC_BILL_NO,
			:NEW.CP_NO,
			:NEW.SECU_NO,
			:NEW.LOAN_NO,
			:NEW.LOAN_REFUND_NO,
			:NEW.LOAN_REFUND_SEQ,
			:NEW.DEPOSIT_ACCNO,
			:NEW.PAYMENT_SEQ,
			:NEW.PAY_CON_CASH,
			:NEW.PAY_CON_BILL,
			:NEW.PAY_CON_BILL_DT,
			:NEW.PAY_CON_BILL_DAYS ,
			:NEW.EMP_NO,
			:NEW.ANTICIPATION_DT,
			:NEW.MNG_ITEM_CHAR1,
			:NEW.MNG_ITEM_CHAR2,
			:NEW.MNG_ITEM_CHAR3,
			:NEW.MNG_ITEM_CHAR4,
			:NEW.MNG_ITEM_NUM1,
			:NEW.MNG_ITEM_NUM2,
			:NEW.MNG_ITEM_NUM3,
			:NEW.MNG_ITEM_NUM4,
			:NEW.MNG_ITEM_DT1,
			:NEW.MNG_ITEM_DT2,
			:NEW.MNG_ITEM_DT3,
			:NEW.MNG_ITEM_DT4,
			:NEW.FIX_ASSET_SEQ
		);
	ELSIF UPDATING THEN
		UPDATE	T_ACC_SLIP_BODY1
		SET
			MAKE_SLIPLINE		=	:NEW.MAKE_SLIPLINE,
			ACC_CODE		=	:NEW.ACC_CODE,
			DB_AMT			=	:NEW.DB_AMT,
			CR_AMT			=	:NEW.CR_AMT,
			SUMMARY_CODE		=	:NEW.SUMMARY_CODE,
			TAX_COMP_CODE		=	:NEW.TAX_COMP_CODE,
			COMP_CODE		=	:NEW.COMP_CODE,
			DEPT_CODE		=	:NEW.DEPT_CODE,
			CLASS_CODE		=	:NEW.CLASS_CODE,
			VAT_CODE		=	:NEW.VAT_CODE,
			VAT_DT			=	:NEW.VAT_DT,
			SUPAMT			=	:NEW.SUPAMT,
			VATAMT			=	:NEW.VATAMT,
			CUST_SEQ		=	:NEW.CUST_SEQ,
			CUST_NAME		=	:NEW.CUST_NAME,
			BANK_CODE		=	:NEW.BANK_CODE,
			ACCNO			=	:NEW.ACCNO,
			RESET_SLIP_ID		=	:NEW.RESET_SLIP_ID,
			RESET_SLIP_IDSEQ	=	:NEW.RESET_SLIP_IDSEQ,
			ORG_SLIP_ID		=	:NEW.ORG_SLIP_ID,
			ORG_SLIP_IDSEQ		=	:NEW.ORG_SLIP_IDSEQ,
			BRAIN_GRP_SEQ = :NEW.BRAIN_GRP_SEQ,
			BRAIN_SLIP_SEQ1 = :NEW.BRAIN_SLIP_SEQ1,
			BRAIN_SLIP_SEQ2 = :NEW.BRAIN_SLIP_SEQ2,
			BRAIN_SLIP_LINE = :NEW.BRAIN_SLIP_LINE,
			BRAIN_SORT_SEQ = :NEW.BRAIN_SORT_SEQ,
			BRAIN_ACC_POSITION = :NEW.BRAIN_ACC_POSITION
		WHERE	SLIP_ID = :OLD.SLIP_ID
		AND		SLIP_IDSEQ = :OLD.SLIP_IDSEQ;
		UPDATE	T_ACC_SLIP_BODY2
		SET
			CRTUSERNO	=	:NEW.CRTUSERNO,
			CRTDATE		=	:NEW.CRTDATE,
			MODUSERNO	=	:NEW.MODUSERNO,
			MODDATE		=	:NEW.MODDATE,
			SUMMARY1	=	:NEW.SUMMARY1,
			SUMMARY2	=	:NEW.SUMMARY2,
			CARD_SEQ	=	:NEW.CARD_SEQ,
			CHK_NO		=	:NEW.CHK_NO,
			BILL_NO		=	:NEW.BILL_NO,
			REC_BILL_NO	=	:NEW.REC_BILL_NO,
			CP_NO		=	:NEW.CP_NO,
			SECU_NO		=	:NEW.SECU_NO,
			LOAN_NO		=	:NEW.LOAN_NO,
			LOAN_REFUND_NO	=	:NEW.LOAN_REFUND_NO,
			LOAN_REFUND_SEQ	=	:NEW.LOAN_REFUND_SEQ,
			DEPOSIT_ACCNO	=	:NEW.DEPOSIT_ACCNO,
			PAYMENT_SEQ	=	:NEW.PAYMENT_SEQ,
			PAY_CON_CASH	=	:NEW.PAY_CON_CASH,
			PAY_CON_BILL	=	:NEW.PAY_CON_BILL,
			PAY_CON_BILL_DT	=	:NEW.PAY_CON_BILL_DT,
			PAY_CON_BILL_DAYS =	:NEW.PAY_CON_BILL_DAYS,
			EMP_NO		=	:NEW.EMP_NO,
			ANTICIPATION_DT	=	:NEW.ANTICIPATION_DT,
			MNG_ITEM_CHAR1	=	:NEW.MNG_ITEM_CHAR1,
			MNG_ITEM_CHAR2	=	:NEW.MNG_ITEM_CHAR2,
			MNG_ITEM_CHAR3	=	:NEW.MNG_ITEM_CHAR3,
			MNG_ITEM_CHAR4	=	:NEW.MNG_ITEM_CHAR4,
			MNG_ITEM_NUM1	=	:NEW.MNG_ITEM_NUM1,
			MNG_ITEM_NUM2	=	:NEW.MNG_ITEM_NUM2,
			MNG_ITEM_NUM3	=	:NEW.MNG_ITEM_NUM3,
			MNG_ITEM_NUM4	=	:NEW.MNG_ITEM_NUM4,
			MNG_ITEM_DT1	=	:NEW.MNG_ITEM_DT1,
			MNG_ITEM_DT2	=	:NEW.MNG_ITEM_DT2,
			MNG_ITEM_DT3	=	:NEW.MNG_ITEM_DT3,
			MNG_ITEM_DT4	=	:NEW.MNG_ITEM_DT4,
			FIX_ASSET_SEQ	=	:NEW.FIX_ASSET_SEQ
		WHERE	SLIP_ID = :OLD.SLIP_ID
		AND		SLIP_IDSEQ = :OLD.SLIP_IDSEQ;
	ELSIF DELETING THEN
		DELETE	T_ACC_B_C_SLIP_INFO
		WHERE	SLIP_ID = :OLD.SLIP_ID
		AND		SLIP_IDSEQ = :OLD.SLIP_IDSEQ;

		DELETE	T_ACC_SLIP_BODY2
		WHERE	SLIP_ID = :OLD.SLIP_ID
		AND		SLIP_IDSEQ = :OLD.SLIP_IDSEQ;

		DELETE	T_ACC_SLIP_BODY1
		WHERE	SLIP_ID = :OLD.SLIP_ID
		AND		SLIP_IDSEQ = :OLD.SLIP_IDSEQ;
	END IF;
END;

